
var oDataTable={init:function(a,b){if(b!==undefined&&typeof b=="object"){console.log(b);return a.DataTable(b)}else{return a.DataTable({dom:'<"top"f>rt<"bottom"lip><"clear">',oLanguage:{sLengthMenu:"Show _MENU_",oPaginate:{sPrevious:"←",sNext:"→"}}})}}};var aceEditor={init:function(f,d,e,c,b){var f=(f===undefined)?"editor":f;var d=(d===undefined)?"ace/theme/textmate":d;var e=(e===undefined)?"ace/mode/handlebars":e;var c=(c===undefined)?true:c;var b=(b===undefined)?100:b;var a=ace.edit(f);a.setTheme(d);a.getSession().setMode(e);a.setAutoScrollEditorIntoView(c);a.setOption("minLines",b);return a}};var AdminApp={init:function(){this.Menu.init()},Menu:{init:function(){self=this;self.menu()},menu:function(){var a=window.location.pathname.substr(1);var b=a.replace(/\//g,"_");if(b.indexOf("brand")>=0&&b.indexOf("reseller")<0){$('ul.sidebar-menu li[data-id="admin_brand"]').addClass("active");$('ul.sidebar-menu li[data-id="admin_brand"]').find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("admin_account")>=0){$('ul.sidebar-menu li[data-id="admin_account"]').addClass("active");$('ul.sidebar-menu li[data-id="admin_account"]').find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("admin_user")>=0){$('ul.sidebar-menu li[data-id="admin_account"]').addClass("active");$('ul.sidebar-menu li[data-id="admin_account"]').find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("profile_account_user")>=0){$('ul.sidebar-menu li[data-id="profile_account"]').addClass("active");$('ul.sidebar-menu li[data-id="profile_account"]').find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("package")>=0){$('ul.sidebar-menu li[data-id="admin_package"]').addClass("active");$('ul.sidebar-menu li[data-id="admin_package"]').addClass("active");$('ul.sidebar-menu li[data-id="admin_package"]').find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("controller")>=0){$("#con-tree").css("border-left","3px solid #f16822");$("#con-tree").css("background","rgba(40, 57, 67, 1)");$("#con-tree a").css("color","white");$("#con-tree").find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("gateway")>=0){$("#admin-tree").css("border-left","3px solid #f16822");$("#admin-tree").css("background","rgba(40, 57, 67, 1)");$("#admin-tree a").css("color","white");$("#admin-tree").find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("reseller")>=0){$("#reseller-tree").css("border-left","3px solid #f16822");$("#reseller-tree").css("background","rgba(40, 57, 67, 1)");$("#reseller-tree a").css("color","white");$("#reseller-tree").find("i").addClass("icon-hover-text-load");if(b.indexOf("client")>=0){$("#reseller_client_tree").find("i").addClass("icon-hover-text-load")}else{if(b.indexOf("brand")>=0){$("#reseller_brand_tree").find("i").addClass("icon-hover-text-load")}}}else{if(b.indexOf("isp")>=0){$("#isp_tree").css("border-left","3px solid #f16822");$("#isp_tree").css("background","rgba(40, 57, 67, 1)");$("#isp_tree a").css("color","white");$("#isp_tree").find("i").addClass("icon-hover-text-load");$("#isp_branch_tree").find("i").addClass("icon-hover-text-load")}else{$('ul.sidebar-menu li[data-id="'+b+'"]').addClass("active");$('ul.sidebar-menu li[data-id="'+b+'"]').find("i").addClass("icon-hover-text-load")}}}}}}}}}$(".user-panel > .user-menu a.dropdown-toggle").on("click",function(c){c.preventDefault();$(this).parent(".dropdown").find(".dropdown-menu").toggleClass("in")})}}};var FormValidator={init:function(a){self=this;self.validation(a)},validation:function(b){var a={};a.ignore='[type="hidden"], [readonly="readonly"], [disabled="disabled"]';a.wrapper="li";a.errorElement="span";a.errorClass="has-error";a.validClass="has-success";a.highlight=function(d,c){if($(d).is("select")){$(d).closest(".form-group").addClass(c)}else{$(d).closest(".form-group").find("span.glyphicon").remove();if($(d).attr("type")=="file"){$(d).closest(".form-group").addClass(c)}else{$(d).closest(".form-group").addClass(c).append('<span class="glyphicon glyphicon-remove form-control-feedback"></span>')}}};a.unhighlight=function(d,c,e){if($(d).is("select")){$(d).closest(".form-group").removeClass(c).addClass(e)}else{$(d).closest(".form-group").find("span.glyphicon").remove();if($(d).attr("type")=="file"){$(d).closest(".form-group").removeClass(c).addClass(e)}else{$(d).closest(".form-group").removeClass(c).addClass(e).append('<span class="glyphicon glyphicon-ok form-control-feedback"></span>')}}};$.validator.setDefaults(a);b.validate();self.rules(b)},rules:function(a){a.find("input, select, textarea").each(function(d){var i=$(this);if(i.is(":hidden")&&!i.hasAttr("readonly")&&!i.hasAttr("disabled")){if(i.hasAttr("required")){var f=formatName(i.attr("name"));var k=(i.hasAttr("data-val-msg"))?i.attr("data-val-msg"):"Please enter "+f;var e=(i.hasAttr("data-val-type"))?i.attr("data-val-type"):i.attr("type");var j={required:true,messages:{required:k}};switch(e){case"email":var h=(i.hasAttr("data-val-msg"))?i.attr("data-val-msg"):"Please enter a valid "+f;j.email=true;j.messages.email=h;break;case"url":var b=(i.hasAttr("data-val-msg"))?i.attr("data-val-msg"):"Please enter a valid "+f;j.url=true;j.messages.url=b;break;case"number":var c=(i.hasAttr("data-val-msg"))?i.attr("data-val-msg"):"Please enter a valid "+f;j.number=true;j.messages.number=c;break;case"confirmPassword":if(self.hasAttr("data-val-equalto")){var g=(i.hasAttr("data-val-msg"))?i.attr("data-val-msg"):"Passwords do not match";j.equalTo=i.attr("data-val-equalto");j.messages.equalTo=g}break}if(i.hasAttr("minlen")){j.minlength=i.attr("minlen");j.messages.minlength=$.validator.format("At least {0} characters required on the "+f)}if(self.hasAttr("maxlength")){j.maxlength=self.attr("maxlength");j.messages.maxlength=$.validator.format("Enter no more than {0} characters on the "+f)}self.rules("add",j)}}})}};var GoogleMapsApi={init:function(c,a){map={};self=this;if(c=="branchLocatorMap2"){var b=8}else{var b=2}self.drawMap(c,a,b)},drawMap:function(f,c,e){var a=0;var d=0;if(typeof c==="object"){$.each(c,function(h,g){a=parseFloat(g[0].lat)||-29;d=parseFloat(g[0].lng)||30})}var b={zoom:e,scrollwheel:false,center:new google.maps.LatLng(a,d)};map=new google.maps.Map(document.getElementById(f),b);google.maps.event.addDomListener(window,"resize",function(){var g=map.getCenter();google.maps.event.trigger(map,"resize");map.setCenter(g)});if(c!==undefined&&typeof c==="object"){if(c.markers!==undefined&&typeof c.markers==="object"){self.createMarkers(c.markers)}}},createMarkers:function(b){var a=new google.maps.InfoWindow();if(typeof b==="object"){$.each(b,function(e,d){var c=parseFloat(d.lat);var f=parseFloat(d.lng);marker=new google.maps.Marker({map:map,position:{lat:c,lng:f},animation:google.maps.Animation.DROP,title:d.name});google.maps.event.addListener(marker,"click",(function(g,h){return function(){a.setContent(d.name);a.open(map,g)}})(marker,e))})}},redrawMap:function(){google.maps.event.trigger(map,"resize")}};var componentForm={country:"long_name"};function initMap(f){if(f=="addBranchMap"){if($("#lat").val()==""||$("#lng").val()==""){var g=-29;var h=31}else{var g=parseFloat($("#lat").val());var h=parseFloat($("#lng").val())}var d={lat:g,lng:h};var b=new google.maps.Map(document.getElementById(f),{center:{lat:g,lng:h},zoom:5});var c=new google.maps.InfoWindow();var e=new google.maps.Marker({map:b,anchorPoint:new google.maps.Point(g,h)})}else{var g=parseFloat($("#lat").val())||0;var h=parseFloat($("#lng").val())||0;var d={lat:g,lng:h};var b=new google.maps.Map(document.getElementById(f),{center:{lat:g,lng:h},zoom:10});var c=new google.maps.InfoWindow();var e=new google.maps.Marker({position:d,map:b,animation:google.maps.Animation.DROP,title:$("#branchName").val()});google.maps.event.addListener(e,"click",(function(j,k){return function(){c.setContent($("#branchName").val());c.open(b,j)}})(e))}var i=(document.getElementById("addressInput"));var a=new google.maps.places.Autocomplete(i);a.bindTo("bounds",b);a.addListener("place_changed",function(){c.close();e.setVisible(false);var k=a.getPlace();if(!k.geometry){window.alert("Autocomplete's returned place contains no geometry");return}document.getElementById("lat").value=k.geometry.location.lat();document.getElementById("lng").value=k.geometry.location.lng();for(var m=0;m<k.address_components.length;m++){var l=k.address_components[m].types[0];if(componentForm[l]){var n=k.address_components[m][componentForm[l]];$("#branchCountrySelect option").filter(function(){return $(this).text()==n}).prop("selected",true)}}if(k.geometry.viewport){b.fitBounds(k.geometry.viewport)}else{b.setCenter(k.geometry.location)}e.setIcon(({url:k.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}));e.setPosition(k.geometry.location);e.setVisible(true);var j="";if(k.address_components){j=[(k.address_components[0]&&k.address_components[0].short_name||""),(k.address_components[1]&&k.address_components[1].short_name||""),(k.address_components[2]&&k.address_components[2].short_name||"")].join(" ")}c.setContent("<div><strong>"+k.name+"</strong><br>"+j);c.open(b,e);getTimezone(k.geometry.location.lat(),k.geometry.location.lng())})}function getTimezone(c,b){var a="https://maps.googleapis.com/maps/api/timezone/json?location="+c+","+b+"&timestamp="+(Math.round((new Date().getTime())/1000)).toString()+"&sensor=false";$.ajax({url:a,}).done(function(d){$("#branchTimeZoneDropDown option").filter(function(){return $(this).text()==d.timeZoneId}).prop("selected",true)})}$(document).on("click","a",function(a){var b=$(this).attr("href");if(b.indexOf("#")==-1&&b.indexOf("gw")==-1){setloader()}});function setloader(){var a='<div id="loadingdiv">';a+='<div id="holdspinner">';a+='<i class="fa fa-spinner fa-spin"></i>';a+="&nbsp;&nbsp;Loading";a+="</div>";a+="</div>";$("div:first").prepend(a)}function createpopup(b,c){if($("#myModal").length){$("#myModal").remove()}var a='<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">';a+='<div class="vertical-alignment-helper">';a+='<div class="modal-dialog vertical-align-center">';a+='<div class="modal-header">';a+="Confirm Selection";a+='<div id="formhover" class="pull-right"><i class="fa fa-close" data-dismiss="modal"></i></div>';a+="</div>";a+='<div class="modal-content">';a+='<div class="modal-body">'+c+"</div>";a+='<div class="modal-footer" style="text-align:center;">';a+='<a id="herefholder" href="#">';a+='<button type="button" class="confirm_button">Continue</button>';a+="</a>";a+="</div>";a+="</div>";a+="</div>";a+="</div>";a+="</div>";$("div:first").prepend(a);$("#herefholder").prop("href",b);$("#myModal").modal("toggle")}$(document).on("click",".delete_click",function(a){createpopup($(this).attr("data-url"),$(this).attr("data-text"))});function clear_dynamic_elements(){if($("#loadingdiv").length){$("#loadingdiv").remove()}if($("#myModal").length){$("#myModal").remove()}}$(document).ready(function(){AdminApp.init();$("ul.sidebar-menu li").mouseenter(function(){if($(this).find("i").hasClass("icon-hover-text-load")){return}$(this).find("i").addClass("icon-hover-text")});$("ul.sidebar-menu li").mouseleave(function(){$(this).find("i").removeClass("icon-hover-text")});clear_dynamic_elements()});